
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Coding Principles Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="R-Guide.html" />
    
    
    <link rel="prev" href="Time-Tracking.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Software-setup.html">
            
                <a href="Software-setup.html">
            
                    
                    Software Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Folder-Organization.html">
            
                <a href="Folder-Organization.html">
            
                    
                    Folder Organization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Project Management
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="Project-Outline.html">
            
                <a href="Project-Outline.html">
            
                    
                    Project Outline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="GitHub-Issues.html">
            
                <a href="GitHub-Issues.html">
            
                    
                    GitHub Issues
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="GitHub-Commits.html">
            
                <a href="GitHub-Commits.html">
            
                    
                    GitHub Commits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="Time-Tracking.html">
            
                <a href="Time-Tracking.html">
            
                    
                    Time Tracking
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.5" data-path="Coding-Principles.html">
            
                <a href="Coding-Principles.html">
            
                    
                    Coding Principles
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="R-Guide.html">
            
                <a href="R-Guide.html">
            
                    
                    R Guide
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="Production-Tasks.html">
            
                <a href="Production-Tasks.html">
            
                    
                    Production Tasks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="Paper-Style-Guidelines.html">
            
                <a href="Paper-Style-Guidelines.html">
            
                    
                    Paper Style Guidelines
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="PhD-Application.html">
            
                <a href="PhD-Application.html">
            
                    
                    PhD Application
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Coding Principles</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="coding-principles">Coding Principles</h1>
<p>We generally want to follow the Gentzkow and Shapiro <a href="https://github.com/gslab-econ/ra-manual/wiki/Code-Style" target="_blank">code structure</a> and <a href="https://github.com/gslab-econ/ra-manual/wiki/Data-Storage-and-Data-Structures" target="_blank">data storage protocols</a>. Also see chapters 6 and 7 of the <a href="https://web.stanford.edu/~gentzkow/research/CodeAndData.pdf" target="_blank">old Gentzkow and Shapiro guide</a> that cover abstraction and self-documentation. Several basic things to re-emphasize:</p>
<ul>
<li>The entire project, from initial data to compiling the paper pdf, can be run from one command, typically GitHub/ProjectName/MakePaper.sh. This shell script will call other files, e.g. Stata, R, Matlab, and Python.<ul>
<li>Do not manually pre-process data, e.g. manipulate Excel sheets, before importing into R or Stata. All data processing, beginning with the original file, should be automated and called from MakePaper.sh.</li>
<li>To keep MakePaper.sh from getting too long and unwieldy, MakePaper.sh may instead call sub-batch files that group together calls to functionally-related Stata, R, etc. code (e.g., BuildPriceData.sh, BuildDrillingData.sh, Estimation.sh, etc.)</li>
</ul>
</li>
<li>Keep code less than 100 characters wide so that it is easy to read.</li>
<li>Each dataset has a valid (unique, non-missing) key. For example, you might have dataset of US county characteristics, e.g. square miles and 1969 population, with one row for each county, and the key being the stateFIPS+countyFIPS.</li>
<li>Keep datasets normalized (meaning that they contain only variables at the same logical level as the key) as late in the data preparation process as possible. Once you merge a state-level dataset with a county-level dataset, the state-level variables are recorded many times (one for each county). This takes a lot of space and can also confuse other aspects of data preparation.</li>
<li>Code should be system agnostic, in that once user-specific directories are identified at the top of the code, along with a query for the identity of the user, the code can be run from any team member&apos;s machine without having to manually change the program&apos;s working directory.<ul>
<li>File paths should always use forward slashes (<code>/</code>) rather than backslashes (<code>\</code>) to avoid problems on non-Windows OS&apos;s.</li>
<li>Best practice is to include a short piece of code in the /Code directory that can other routines can call to obtain directory paths. In Stata, this can be accomplished through the use of the <a href="http://www.stata.com/help.cgi?include" target="_blank">include</a> command. Thus, each routine need only point to each user&apos;s /Code directory rather than the full set of sub-directories. This approach avoids the need to modify every routine should we decide to re-organize the directory structure at a later date.</li>
</ul>
</li>
<li>Code should also be version agnostic, so that team members (and future reproducers) get the same results no matter what version of software they are using. In Stata, this can be accomplished by using the <a href="http://www.stata.com/manuals13/pversion.pdf" target="_blank">version command</a> to set the Stata version to the lowest version in use by the team.</li>
<li>Whenever using an algorithm that requires random number generation (e.g., Monte Carlo simulation or bootstrapping), set the seed so that the results do not change every time the code is run.</li>
<li>As much as possible we would like to use object-oriented programming (OOP). It adds a layer of structure and simplification to large, complicated code. A nice introduction to OOP for Economics can be found <a href="https://lectures.quantecon.org/py/python_oop.html" target="_blank">here</a>. </li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Time-Tracking.html" class="navigation navigation-prev " aria-label="Previous page: Time Tracking">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="R-Guide.html" class="navigation navigation-next " aria-label="Next page: R Guide">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Coding Principles","level":"1.5","depth":1,"next":{"title":"R Guide","level":"1.5.1","depth":2,"path":"pages/R-Guide.md","ref":"pages/R-Guide.md","articles":[]},"previous":{"title":"Time Tracking","level":"1.4.4","depth":2,"path":"pages/Time-Tracking.md","ref":"pages/Time-Tracking.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"pages/Coding-Principles.md","mtime":"2018-11-09T22:06:55.088Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-11-09T22:36:49.703Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

